class AxyraAdminAuth{constructor(){this.adminEmails = [ 'axyra.app@gmail.com' ];this.init();}init(){console.log('üîê Inicializando Autenticaci√≥n de Administradores AXYRA...');this.setupAuthListeners();}setupAuthListeners(){document.addEventListener('userAuthenticated',(e)=>{if(this.isAdmin(e.detail.user)){this.showAdminAccess();}});document.addEventListener('userLogout',()=>{this.hideAdminAccess();});}isAdmin(user){if(!user || !user.email)return false;return this.adminEmails.includes(user.email.toLowerCase());}showAdminAccess(){this.addAdminButton();this.addFloatingAdminPanel();}hideAdminAccess(){const adminButton = document.getElementById('admin-access-button');if(adminButton)adminButton.remove();const adminPanel = document.getElementById('floating-admin-panel');if(adminPanel)adminPanel.remove();}addAdminButton(){if(document.getElementById('admin-access-button'))return;const header = document.querySelector('.axyra-header,.header,header');if(!header)return;const adminButton = document.createElement('div');adminButton.id = 'admin-access-button';adminButton.innerHTML = ` <button onclick="window.location.href='admin.html'" class="admin-access-btn"> <i class="fas fa-crown"></i> <span>Administraci√≥n</span> </button> `;const styles = document.createElement('style');styles.textContent = ` .admin-access-btn{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:white;border:none;padding:10px 20px;border-radius:25px;font-weight:600;cursor:pointer;transition:all 0.3s ease;display:flex;align-items:center;gap:8px;box-shadow:0 4px 15px rgba(102,126,234,0.3);}.admin-access-btn:hover{transform:translateY(-2px);box-shadow:0 6px 20px rgba(102,126,234,0.4);}.admin-access-btn i{font-size:1.1rem;}.admin-access-btn span{font-size:0.9rem;}@media(max-width:768px){.admin-access-btn span{display:none;}.admin-access-btn{padding:10px 15px;}}`;document.head.appendChild(styles);header.appendChild(adminButton);}addFloatingAdminPanel(){if(document.getElementById('floating-admin-panel'))return;const panel = document.createElement('div');panel.id = 'floating-admin-panel';panel.innerHTML = ` <div class="floating-admin-content"> <div class="floating-admin-header"> <h4><i class="fas fa-crown"></i> Panel Admin</h4> <button onclick="this.parentElement.parentElement.parentElement.remove()" class="floating-admin-close"> <i class="fas fa-times"></i> </button> </div> <div class="floating-admin-actions"> <button onclick="window.location.href='admin.html'" class="floating-admin-btn"> <i class="fas fa-tachometer-alt"></i> <span>Dashboard</span> </button> <button onclick="window.axyraAdminSubscription.activateUserSubscription()" class="floating-admin-btn"> <i class="fas fa-user-plus"></i> <span>Activar Usuario</span> </button> <button onclick="window.axyraAdminSubscription.viewAllSubscriptions()" class="floating-admin-btn"> <i class="fas fa-list"></i> <span>Ver Suscripciones</span> </button> <button onclick="window.axyraAdminSubscription.exportSubscriptions()" class="floating-admin-btn"> <i class="fas fa-download"></i> <span>Exportar</span> </button> </div> </div> `;const styles = document.createElement('style');styles.textContent = ` #floating-admin-panel{position:fixed;top:20px;right:20px;width:250px;background:white;border-radius:15px;box-shadow:0 10px 30px rgba(0,0,0,0.2);z-index:9999;border:2px solid #667eea;}.floating-admin-content{padding:0;}.floating-admin-header{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:white;padding:15px;border-radius:15px 15px 0 0;display:flex;justify-content:space-between;align-items:center;}.floating-admin-header h4{margin:0;font-size:1rem;display:flex;align-items:center;gap:8px;}.floating-admin-close{background:none;border:none;color:white;cursor:pointer;padding:5px;border-radius:4px;transition:background 0.3s ease;}.floating-admin-close:hover{background:rgba(255,255,255,0.2);}.floating-admin-actions{padding:15px;display:flex;flex-direction:column;gap:10px;}.floating-admin-btn{background:#f8fafc;border:1px solid #e5e7eb;color:#374151;padding:12px 15px;border-radius:8px;cursor:pointer;transition:all 0.3s ease;display:flex;align-items:center;gap:10px;font-size:0.9rem;font-weight:500;}.floating-admin-btn:hover{background:#667eea;color:white;transform:translateX(5px);}.floating-admin-btn i{width:16px;text-align:center;}@media(max-width:768px){#floating-admin-panel{width:200px;top:10px;right:10px;}.floating-admin-btn span{font-size:0.8rem;}}`;document.head.appendChild(styles);document.body.appendChild(panel);}checkAdminAccess(){const user = this.getCurrentUser();if(user && this.isAdmin(user)){this.showAdminAccess();return true;}return false;}getCurrentUser(){try{const user = localStorage.getItem('axyra_user');return user ? JSON.parse(user):null;}catch(error){return null;}}addAdminEmail(email){if(!this.adminEmails.includes(email.toLowerCase())){this.adminEmails.push(email.toLowerCase());console.log('‚úÖ Email de administrador agregado:',email);}}removeAdminEmail(email){const index = this.adminEmails.indexOf(email.toLowerCase());if(index > -1){this.adminEmails.splice(index,1);console.log('‚ùå Email de administrador removido:',email);}}getAdminEmails(){return [...this.adminEmails];}}window.axyraAdminAuth = new AxyraAdminAuth();document.addEventListener('DOMContentLoaded',()=>{if(window.axyraAdminAuth){window.axyraAdminAuth.checkAdminAccess();}});