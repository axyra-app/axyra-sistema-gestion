class AxyraResponsiveDesign{constructor(){this.currentBreakpoint = 'desktop';this.breakpoints ={mobile:768,tablet:1024,desktop:1025};this.init();}init(){console.log('📱 Inicializando Sistema de Responsive Design AXYRA...');this.setupEventListeners();this.detectBreakpoint();this.applyResponsiveStyles();this.setupTouchSupport();this.setupMobileNavigation();}setupEventListeners(){window.addEventListener('resize',this.debounce(()=>{this.detectBreakpoint();this.applyResponsiveStyles();},250));window.addEventListener('orientationchange',()=>{setTimeout(()=>{this.detectBreakpoint();this.applyResponsiveStyles();},100);});if(window.matchMedia){const prefersDark = window.matchMedia('(prefers-color-scheme:dark)');prefersDark.addEventListener('change',(e)=>{this.handleThemeChange(e.matches);});const prefersReducedMotion = window.matchMedia('(prefers-reduced-motion:reduce)');prefersReducedMotion.addEventListener('change',(e)=>{this.handleMotionPreference(e.matches);});}}detectBreakpoint(){const width = window.innerWidth;let newBreakpoint = 'desktop';if(width <= this.breakpoints.mobile){newBreakpoint = 'mobile';}else if(width <= this.breakpoints.tablet){newBreakpoint = 'tablet';}if(newBreakpoint !== this.currentBreakpoint){this.currentBreakpoint = newBreakpoint;this.onBreakpointChange(newBreakpoint);}}onBreakpointChange(breakpoint){console.log(`📱 Cambio de breakpoint:${breakpoint}`);document.body.className = document.body.className.replace(/axyra-breakpoint-\w+/g,'');document.body.classList.add(`axyra-breakpoint-${breakpoint}`);if(breakpoint === 'mobile'){this.setupMobileNavigation();}else{this.cleanupMobileNavigation();}this.adjustChartsForBreakpoint(breakpoint);this.adjustTablesForBreakpoint(breakpoint);window.dispatchEvent(new CustomEvent('axyra-breakpoint-change',{detail:{breakpoint}}));}applyResponsiveStyles(){const styles = this.getResponsiveStyles();this.injectResponsiveCSS(styles);this.adjustGridLayout();this.adjustNavigation();this.adjustForms();this.adjustModals();}getResponsiveStyles(){const baseStyles = ` .axyra-responsive-hidden-mobile{display:block;}.axyra-responsive-hidden-tablet{display:block;}.axyra-responsive-hidden-desktop{display:block;}.axyra-responsive-visible-mobile{display:none;}.axyra-responsive-visible-tablet{display:none;}.axyra-responsive-visible-desktop{display:none;}`;const mobileStyles = ` .axyra-responsive-hidden-mobile{display:none !important;}.axyra-responsive-visible-mobile{display:block !important;}.axyra-container{padding:1rem;}.axyra-grid{grid-template-columns:1fr !important;}.axyra-grid-2{grid-template-columns:1fr !important;}.axyra-grid-3{grid-template-columns:1fr !important;}.axyra-stats-grid{grid-template-columns:1fr !important;gap:1rem;}.axyra-stats-grid-secondary{grid-template-columns:1fr !important;gap:1rem;}.axyra-card{margin-bottom:1rem;padding:1rem;}.axyra-page-header{text-align:center;}.axyra-page-title{font-size:1.5rem;}.axyra-page-subtitle{font-size:1rem;}.axyra-welcome-card{padding:1.5rem;text-align:center;}.axyra-welcome-title{font-size:2rem;}.axyra-welcome-message{font-size:1rem;}.axyra-actions-bar{grid-template-columns:1fr !important;gap:0.5rem;}.axyra-action-btn{padding:0.75rem;font-size:0.9rem;}.axyra-modal-content{max-width:95%;margin:1rem;}.axyra-modal-body{padding:1rem;}.axyra-form-row{flex-direction:column;}.axyra-form-group{margin-bottom:1rem;}.axyra-nav{flex-direction:column;gap:0.5rem;}.axyra-nav-link{padding:0.75rem;text-align:center;}.axyra-mobile-nav-toggle{display:block;}.axyra-nav{display:none;}.axyra-nav.axyra-nav-open{display:flex;}.axyra-chart-container{height:250px !important;}.axyra-table-responsive{overflow-x:auto;}.axyra-table{font-size:0.8rem;}.axyra-table th,.axyra-table td{padding:0.5rem;}`;const tabletStyles = ` .axyra-responsive-hidden-tablet{display:none !important;}.axyra-responsive-visible-tablet{display:block !important;}.axyra-container{padding:1.5rem;}.axyra-grid-3{grid-template-columns:repeat(2,1fr)!important;}.axyra-stats-grid{grid-template-columns:repeat(2,1fr)!important;}.axyra-stats-grid-secondary{grid-template-columns:repeat(3,1fr)!important;}.axyra-actions-bar{grid-template-columns:repeat(2,1fr)!important;}.axyra-modal-content{max-width:90%;}.axyra-form-row{flex-direction:row;flex-wrap:wrap;}.axyra-form-group{flex:1 1 calc(50% - 1rem);}`;const desktopStyles = ` .axyra-responsive-hidden-desktop{display:none !important;}.axyra-responsive-visible-desktop{display:block !important;}.axyra-container{padding:2rem;}.axyra-grid{grid-template-columns:repeat(auto-fit,minmax(300px,1fr));}.axyra-grid-2{grid-template-columns:repeat(2,1fr);}.axyra-grid-3{grid-template-columns:repeat(3,1fr);}.axyra-stats-grid{grid-template-columns:repeat(4,1fr);}.axyra-stats-grid-secondary{grid-template-columns:repeat(6,1fr);}.axyra-actions-bar{grid-template-columns:repeat(4,1fr);}.axyra-modal-content{max-width:80%;}.axyra-form-row{flex-direction:row;}.axyra-form-group{flex:1;}`;return baseStyles + mobileStyles + tabletStyles + desktopStyles;}injectResponsiveCSS(styles){let styleElement = document.getElementById('axyra-responsive-styles');if(!styleElement){styleElement = document.createElement('style');styleElement.id = 'axyra-responsive-styles';document.head.appendChild(styleElement);}styleElement.textContent = styles;}adjustGridLayout(){const grids = document.querySelectorAll('.axyra-grid,.axyra-grid-2,.axyra-grid-3');grids.forEach(grid =>{if(this.currentBreakpoint === 'mobile'){grid.style.gridTemplateColumns = '1fr';}else if(this.currentBreakpoint === 'tablet'){if(grid.classList.contains('axyra-grid-3')){grid.style.gridTemplateColumns = 'repeat(2,1fr)';}else{grid.style.gridTemplateColumns = 'repeat(2,1fr)';}}else{grid.style.gridTemplateColumns = '';}});}adjustNavigation(){const nav = document.querySelector('.axyra-nav');if(!nav)return;if(this.currentBreakpoint === 'mobile'){nav.classList.add('axyra-nav-mobile');}else{nav.classList.remove('axyra-nav-mobile');}}adjustForms(){const formRows = document.querySelectorAll('.axyra-form-row');formRows.forEach(row =>{if(this.currentBreakpoint === 'mobile'){row.style.flexDirection = 'column';}else{row.style.flexDirection = 'row';}});}adjustModals(){const modals = document.querySelectorAll('.axyra-modal-content');modals.forEach(modal =>{if(this.currentBreakpoint === 'mobile'){modal.style.maxWidth = '95%';modal.style.margin = '1rem';}else if(this.currentBreakpoint === 'tablet'){modal.style.maxWidth = '90%';modal.style.margin = '2rem';}else{modal.style.maxWidth = '80%';modal.style.margin = '2rem';}});}setupMobileNavigation(){let mobileNavToggle = document.querySelector('.axyra-mobile-nav-toggle');if(!mobileNavToggle){mobileNavToggle = document.createElement('button');mobileNavToggle.className = 'axyra-mobile-nav-toggle';mobileNavToggle.innerHTML = '<i class="fas fa-bars"></i>';mobileNavToggle.setAttribute('aria-label','Abrir menú de navegación');const nav = document.querySelector('.axyra-nav');if(nav && nav.parentNode){nav.parentNode.insertBefore(mobileNavToggle,nav);}}mobileNavToggle.addEventListener('click',()=>{const nav = document.querySelector('.axyra-nav');if(nav){nav.classList.toggle('axyra-nav-open');const isOpen = nav.classList.contains('axyra-nav-open');mobileNavToggle.innerHTML = isOpen ? '<i class="fas fa-times"></i>':'<i class="fas fa-bars"></i>';mobileNavToggle.setAttribute('aria-label',isOpen ? 'Cerrar menú de navegación':'Abrir menú de navegación');}});const navLinks = document.querySelectorAll('.axyra-nav-link');navLinks.forEach(link =>{link.addEventListener('click',()=>{const nav = document.querySelector('.axyra-nav');if(nav && nav.classList.contains('axyra-nav-open')){nav.classList.remove('axyra-nav-open');mobileNavToggle.innerHTML = '<i class="fas fa-bars"></i>';mobileNavToggle.setAttribute('aria-label','Abrir menú de navegación');}});});}cleanupMobileNavigation(){const mobileNavToggle = document.querySelector('.axyra-mobile-nav-toggle');if(mobileNavToggle){mobileNavToggle.remove();}const nav = document.querySelector('.axyra-nav');if(nav){nav.classList.remove('axyra-nav-open','axyra-nav-mobile');}}setupTouchSupport(){if('ontouchstart' in window){document.body.classList.add('axyra-touch-device');this.setupTouchScroll();this.setupTouchGestures();}}setupTouchScroll(){const scrollableElements = document.querySelectorAll('.axyra-modal-body,.axyra-card-content');scrollableElements.forEach(element =>{element.style.webkitOverflowScrolling = 'touch';element.style.overflowScrolling = 'touch';});}setupTouchGestures(){let startX = 0;let startY = 0;let endX = 0;let endY = 0;document.addEventListener('touchstart',(e)=>{startX = e.touches[0].clientX;startY = e.touches[0].clientY;});document.addEventListener('touchend',(e)=>{endX = e.changedTouches[0].clientX;endY = e.changedTouches[0].clientY;this.handleSwipeGesture(startX,startY,endX,endY);});}handleSwipeGesture(startX,startY,endX,endY){const deltaX = endX - startX;const deltaY = endY - startY;const minSwipeDistance = 50;if(Math.abs(deltaX)> Math.abs(deltaY)&& Math.abs(deltaX)> minSwipeDistance){if(deltaX > 0){this.handleSwipeRight();}else{this.handleSwipeLeft();}}else if(Math.abs(deltaY)> Math.abs(deltaX)&& Math.abs(deltaY)> minSwipeDistance){if(deltaY > 0){this.handleSwipeDown();}else{this.handleSwipeUp();}}}handleSwipeRight(){const nav = document.querySelector('.axyra-nav');if(nav && nav.classList.contains('axyra-nav-open')){nav.classList.remove('axyra-nav-open');const toggle = document.querySelector('.axyra-mobile-nav-toggle');if(toggle){toggle.innerHTML = '<i class="fas fa-bars"></i>';}}}handleSwipeLeft(){const nav = document.querySelector('.axyra-nav');if(nav && !nav.classList.contains('axyra-nav-open')&& this.currentBreakpoint === 'mobile'){nav.classList.add('axyra-nav-open');const toggle = document.querySelector('.axyra-mobile-nav-toggle');if(toggle){toggle.innerHTML = '<i class="fas fa-times"></i>';}}}handleSwipeDown(){window.scrollTo({top:0,behavior:'smooth'});}handleSwipeUp(){window.scrollTo({top:document.body.scrollHeight,behavior:'smooth'});}adjustChartsForBreakpoint(breakpoint){const charts = document.querySelectorAll('canvas');charts.forEach(chart =>{if(chart.chart){const chartInstance = chart.chart;if(breakpoint === 'mobile'){chartInstance.options.responsive = true;chartInstance.options.maintainAspectRatio = false;chart.style.height = '250px';}else if(breakpoint === 'tablet'){chartInstance.options.responsive = true;chartInstance.options.maintainAspectRatio = false;chart.style.height = '300px';}else{chartInstance.options.responsive = true;chartInstance.options.maintainAspectRatio = false;chart.style.height = '400px';}chartInstance.resize();}});}adjustTablesForBreakpoint(breakpoint){const tables = document.querySelectorAll('.axyra-table');tables.forEach(table =>{if(breakpoint === 'mobile'){if(!table.parentNode.classList.contains('axyra-table-responsive')){const wrapper = document.createElement('div');wrapper.className = 'axyra-table-responsive';table.parentNode.insertBefore(wrapper,table);wrapper.appendChild(table);}table.style.fontSize = '0.8rem';}else{table.style.fontSize = '';}});}handleThemeChange(isDark){if(isDark){document.body.classList.add('axyra-theme-dark');}else{document.body.classList.remove('axyra-theme-dark');}}handleMotionPreference(reduceMotion){if(reduceMotion){document.body.classList.add('axyra-reduce-motion');}else{document.body.classList.remove('axyra-reduce-motion');}}debounce(func,wait){let timeout;return function executedFunction(...args){const later =()=>{clearTimeout(timeout);func(...args);};clearTimeout(timeout);timeout = setTimeout(later,wait);};}getCurrentBreakpoint(){return this.currentBreakpoint;}isMobile(){return this.currentBreakpoint === 'mobile';}isTablet(){return this.currentBreakpoint === 'tablet';}isDesktop(){return this.currentBreakpoint === 'desktop';}refresh(){this.detectBreakpoint();this.applyResponsiveStyles();}}document.addEventListener('DOMContentLoaded',function(){console.log('📱 Inicializando Sistema de Responsive Design...');try{window.axyraResponsive = new AxyraResponsiveDesign();}catch(error){console.error('❌ Error inicializando responsive design:',error);}});window.axyraGetBreakpoint = function(){if(window.axyraResponsive){return window.axyraResponsive.getCurrentBreakpoint();}return 'desktop';};window.axyraIsMobile = function(){if(window.axyraResponsive){return window.axyraResponsive.isMobile();}return false;};window.axyraRefreshResponsive = function(){if(window.axyraResponsive){window.axyraResponsive.refresh();}};