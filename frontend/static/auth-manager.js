class AxyraAuthManager{constructor(){this.currentUser = null;this.isAuthenticated = false;this.init();}init(){console.log('🔐 Inicializando AXYRA Auth Manager...');this.checkAuthStatus();console.log('✅ AXYRA Auth Manager inicializado');}checkAuthStatus(){try{console.log('🔍 Verificando estado de autenticación...');const userData = localStorage.getItem('axyra_isolated_user');if(userData){try{const user = JSON.parse(userData);if(user && user.uid){this.currentUser = user;this.isAuthenticated = true;console.log('✅ Usuario autenticado desde localStorage:',user.email || user.username);return true;}}catch(parseError){console.warn('⚠️ Error parseando usuario de localStorage:',parseError);}}if(typeof firebase !== 'undefined' && firebase.auth){const user = firebase.auth().currentUser;if(user){console.log('✅ Usuario autenticado desde Firebase');const userInfo ={uid:user.uid,email:user.email,displayName:user.displayName || user.email.split('@')[0],username:user.email.split('@')[0],photoURL:user.photoURL || null,provider:'firebase',hasPassword:true,emailVerified:user.emailVerified,id:user.uid,isAuthenticated:true};localStorage.setItem('axyra_isolated_user',JSON.stringify(userInfo));this.currentUser = userInfo;this.isAuthenticated = true;return true;}}console.log('❌ No se encontró usuario autenticado');this.isAuthenticated = false;this.currentUser = null;return false;}catch(error){console.error('❌ Error verificando estado de autenticación:',error);return false;}}isUserAuthenticated(){return this.isAuthenticated;}getCurrentUser(){return this.currentUser;}forceAuthCheck(){return this.checkAuthStatus();}}document.addEventListener('DOMContentLoaded',function(){console.log('🚀 Inicializando AXYRA Auth Manager...');try{window.axyraAuthManager = new AxyraAuthManager();}catch(error){console.error('❌ Error inicializando Auth Manager:',error);}});window.AxyraAuthManager = AxyraAuthManager;