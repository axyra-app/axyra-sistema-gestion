class AxyraHeaderIncluder{constructor(){this.isInitialized = false;this.headerInserted = false;this.scriptLoaded = false;this.init();}async init(){try{if(this.isInitialized){console.log('‚ö†Ô∏è Header ya inicializado,saltando...');return;}this.isInitialized = true;console.log('üöÄ Inicializando header compartido AXYRA...');if(document.readyState === 'loading'){document.addEventListener('DOMContentLoaded',()=> this.setupHeader());}else{this.setupHeader();}}catch(error){console.error('‚ùå Error en inicializaci√≥n del header:',error);}}async setupHeader(){try{if(document.querySelector('.axyra-header')){console.log('‚úÖ Header ya existe en la p√°gina,saltando inserci√≥n...');return;}const paths = this.determinePaths();await this.includeHeader(paths.headerPath);await this.includeScript(paths.scriptPath);console.log('‚úÖ Header compartido AXYRA configurado correctamente');}catch(error){console.error('‚ùå Error configurando header:',error);this.createFallbackHeader();}}determinePaths(){const currentPath = window.location.pathname;let headerPath,scriptPath;if(currentPath.includes('/modulos/')){headerPath = '../../static/shared-header.html';scriptPath = '../../static/shared-header.js';}else if(currentPath.includes('/admin/')){headerPath = '../static/shared-header.html';scriptPath = '../static/shared-header.js';}else{headerPath = 'static/shared-header.html';scriptPath = 'static/shared-header.js';}console.log('üìç Rutas calculadas:',{headerPath,scriptPath,currentPath});return{headerPath,scriptPath};}async includeHeader(headerPath){try{console.log('üì• Cargando header desde:',headerPath);const response = await fetch(headerPath);if(!response.ok){throw new Error(`HTTP error! status:${response.status}`);}const headerHTML = await response.text();console.log('‚úÖ Header HTML cargado correctamente,longitud:',headerHTML.length);if(!document.querySelector('.axyra-header')){const body = document.body;if(body){body.insertAdjacentHTML('afterbegin',headerHTML);this.headerInserted = true;console.log('‚úÖ Header insertado en el body');}else{console.error('‚ùå Body no encontrado');}}else{console.log('‚úÖ Header ya existe,saltando inserci√≥n');}}catch(error){console.warn('‚ö†Ô∏è No se pudo cargar header compartido,usando fallback:',error);this.createFallbackHeader();}}async includeScript(scriptPath){try{console.log('üì• Cargando script del header desde:',scriptPath);if(document.querySelector(`script[src="${scriptPath}"]`)){console.log('‚úÖ Script del header ya est√° cargado');this.scriptLoaded = true;return;}const script = document.createElement('script');script.src = scriptPath;script.async = false;script.onload =()=>{console.log('‚úÖ Script del header cargado y ejecutado');this.scriptLoaded = true;this.initializeHeader();};script.onerror =(error)=>{console.error('‚ùå Error cargando script del header:',error);};document.head.appendChild(script);}catch(error){console.warn('‚ö†Ô∏è No se pudo cargar script del header:',error);}}initializeHeader(){try{setTimeout(()=>{try{if(window.axyraSharedHeader){new window.axyraSharedHeader();console.log('‚úÖ Header inicializado correctamente');}else if(typeof AxyraSharedHeader !== 'undefined'){new AxyraSharedHeader();console.log('‚úÖ Header inicializado directamente');}else{console.log('‚ö†Ô∏è Clase del header no disponible,intentando m√°s tarde...');setTimeout(()=> this.initializeHeader(),1000);}}catch(error){console.error('‚ùå Error inicializando header:',error);}},300);}catch(error){console.error('‚ùå Error en inicializaci√≥n:',error);}}createFallbackHeader(){if(document.querySelector('.axyra-header')){console.log('‚úÖ Header ya existe,no creando fallback');return;}const paths = this.determinePaths();const fallbackHeader = ` <header class="axyra-header"> <div class="axyra-header-content"> <div class="axyra-logo-title"> <img src="${paths.headerPath.replace('shared-header.html','logo.png')}" alt="AXYRA Logo" class="axyra-logo" onerror="this.style.display='none';this.nextElementSibling.style.display='inline-block';"> <i class="fas fa-building" style="display:none;font-size:32px;color:#4299e1;margin-right:12px;" class="axyra-logo-fallback"></i> <div class="axyra-title-section"> <h1 class="axyra-title">AXYRA</h1> <span class="axyra-subtitle" id="pageSubtitle">Dashboard</span> </div> </div> <nav class="axyra-nav" id="axyraNav"> <a href="${paths.headerPath.replace('static/shared-header.html','index.html')}" class="axyra-nav-link"> <i class="fas fa-home"></i> Inicio </a> <a href="${paths.headerPath.replace('static/shared-header.html','modulos/dashboard/dashboard.html')}" class="axyra-nav-link"> <i class="fas fa-tachometer-alt"></i> Dashboard </a> <a href="${paths.headerPath.replace('static/shared-header.html','modulos/empleados/empleados.html')}" class="axyra-nav-link"> <i class="fas fa-users"></i> Empleados </a> <a href="${paths.headerPath.replace('static/shared-header.html','modulos/horas/gestionar_horas.html')}" class="axyra-nav-link"> <i class="fas fa-clock"></i> Horas </a> <a href="${paths.headerPath.replace('static/shared-header.html','modulos/nomina/gestionar_nomina.html')}" class="axyra-nav-link"> <i class="fas fa-file-invoice-dollar"></i> N√≥mina </a> <a href="${paths.headerPath.replace('static/shared-header.html','modulos/cuadre_caja/cuadre_caja.html')}" class="axyra-nav-link"> <i class="fas fa-calculator"></i> Caja </a> <a href="${paths.headerPath.replace('static/shared-header.html','modulos/inventario/inventario.html')}" class="axyra-nav-link"> <i class="fas fa-boxes"></i> Inventario </a> <a href="${paths.headerPath.replace('static/shared-header.html','modulos/configuracion/configuracion.html')}" class="axyra-nav-link"> <i class="fas fa-cog"></i> Config </a> </nav> <div class="axyra-user-section"> <span class="axyra-user-email" id="userEmail">Usuario</span> <button class="axyra-logout-btn" data-action="logout"> <i class="fas fa-sign-out-alt"></i> <span class="axyra-logout-text">Cerrar</span> </button> </div> </div> </header> `;document.body.insertAdjacentHTML('afterbegin',fallbackHeader);console.log('‚úÖ Header de respaldo creado');}}function incluirHeaderAXYRA(){return new AxyraHeaderIncluder();}function initHeaderAXYRA(){console.log('üöÄ Inicializando header compartido AXYRA...');return incluirHeaderAXYRA();}function initHeader(){if(window.axyraHeaderIncluder){console.log('‚ö†Ô∏è Header ya inicializado globalmente');return;}window.axyraHeaderIncluder = new AxyraHeaderIncluder();}if(document.readyState === 'loading'){document.addEventListener('DOMContentLoaded',initHeader);}else{setTimeout(initHeader,100);}window.AxyraHeaderIncluder = AxyraHeaderIncluder;window.incluirHeaderAXYRA = incluirHeaderAXYRA;window.initHeaderAXYRA = initHeaderAXYRA;