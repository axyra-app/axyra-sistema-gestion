class AxyraAdminSetup{constructor(){this.adminEmail = 'axyra.app@gmail.com';this.adminPassword = 'AxyraAdmin2024!';this.init();}init(){console.log('ðŸ”§ Inicializando configuraciÃ³n de administrador...');if(window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1' || window.location.search.includes('setup=admin')){this.setupAdmin();}}async setupAdmin(){try{console.log('ðŸ‘‘ Configurando usuario administrador...');if(typeof firebase === 'undefined'){console.error('âŒ Firebase no estÃ¡ disponible');return;}await this.createAdminUser();}catch(error){console.error('âŒ Error configurando admin:',error);}}async createAdminUser(){try{const userCredential = await firebase.auth().createUserWithEmailAndPassword(this.adminEmail,this.adminPassword);console.log('âœ… Usuario administrador creado:',userCredential.user.email);await firebase.firestore().collection('usuarios').doc(userCredential.user.uid).set({uid:userCredential.user.uid,email:this.adminEmail,displayName:'Administrador AXYRA',username:'admin',role:'admin',isAdmin:true,createdAt:firebase.firestore.FieldValue.serverTimestamp(),lastLogin:firebase.firestore.FieldValue.serverTimestamp(),provider:'email',hasPassword:true,emailVerified:false,});console.log('âœ… Perfil de administrador creado en Firestore');await firebase.auth().signOut();console.log('âœ… SesiÃ³n cerrada. El administrador puede hacer login ahora.');}catch(error){if(error.code === 'auth/email-already-in-use'){console.log('â„¹ï¸ Usuario administrador ya existe');await this.updateAdminUser();}else{console.error('âŒ Error creando usuario admin:',error);}}}async updateAdminUser(){try{const usersSnapshot = await firebase.firestore().collection('usuarios').where('email','==',this.adminEmail).get();if(!usersSnapshot.empty){const userDoc = usersSnapshot.docs[0];await userDoc.ref.update({role:'admin',isAdmin:true,lastUpdated:firebase.firestore.FieldValue.serverTimestamp(),});console.log('âœ… Usuario existente actualizado como administrador');}}catch(error){console.error('âŒ Error actualizando usuario admin:',error);}}}document.addEventListener('DOMContentLoaded',()=>{new AxyraAdminSetup();});window.setupAxyraAdmin = function(){new AxyraAdminSetup();};