class AxyraUnifiedAuthSystem{constructor(){this.isInitialized = false;this.authMethods = [];this.currentUser = null;this.config ={autoRedirect:true,sessionTimeout:30 * 60 * 1000,debug:false};}async initialize(){if(this.isInitialized)return;try{console.log('ðŸ” Inicializando Sistema Unificado de Auth AXYRA...');this.checkAuthMethods();this.setupBasicListeners();this.isInitialized = true;console.log('âœ… Sistema Unificado de Auth AXYRA inicializado');}catch(error){console.warn('âš ï¸ Error inicializando sistema unificado de auth:',error);}}checkAuthMethods(){this.authMethods = [];if(typeof firebase !== 'undefined' && firebase.auth){this.authMethods.push('firebase');}if(localStorage.getItem('axyra_isolated_user')){this.authMethods.push('localStorage');}if(window.axyraAuthManager){this.authMethods.push('isolated');}console.log('ðŸ” MÃ©todos de auth disponibles:',this.authMethods);}setupBasicListeners(){if(!window.axyraAuthManager){window.addEventListener('storage',(e)=>{if(e.key === 'axyra_isolated_user'){this.handleStorageChange(e);}});}}handleStorageChange(event){try{if(event.newValue){const userData = JSON.parse(event.newValue);if(userData && userData.isAuthenticated){this.currentUser = userData;}}}catch(error){console.warn('âš ï¸ Error procesando cambio en storage:',error);}}isAuthenticated(){try{if(window.axyraAuthManager){return window.axyraAuthManager.isUserAuthenticated();}const userData = localStorage.getItem('axyra_isolated_user');if(userData){const user = JSON.parse(userData);return user && user.isAuthenticated;}return false;}catch(error){console.warn('âš ï¸ Error verificando autenticaciÃ³n:',error);return false;}}getCurrentUser(){try{if(window.axyraAuthManager){return window.axyraAuthManager.getCurrentUser();}const userData = localStorage.getItem('axyra_isolated_user');if(userData){return JSON.parse(userData);}return null;}catch(error){console.warn('âš ï¸ Error obteniendo usuario actual:',error);return null;}}logout(){try{console.log('ðŸšª Cerrando sesiÃ³n desde sistema unificado...');localStorage.removeItem('axyra_isolated_user');if(this.config.autoRedirect){window.location.href = '/login.html';}}catch(error){console.warn('âš ï¸ Error en logout:',error);window.location.href = '../../login.html';}}getSystemInfo(){return{version:'1.0.0-simplified',authMethods:this.authMethods,isInitialized:this.isInitialized,currentUser:this.currentUser ? 'authenticated':'not_authenticated'};}}document.addEventListener('DOMContentLoaded',()=>{if(!window.axyraUnifiedAuth){window.axyraUnifiedAuth = new AxyraUnifiedAuthSystem();window.axyraUnifiedAuth.initialize();}});window.AxyraUnifiedAuthSystem = AxyraUnifiedAuthSystem;